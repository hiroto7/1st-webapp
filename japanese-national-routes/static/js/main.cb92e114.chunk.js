(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(21)},17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),l=n.n(o),c=(n(17),n(7)),s=n.n(c),u=n(1),i=n(10),d=n(2),h=n(3),m=n(5),b=n(4),p=n(6),g=(n(19),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(b.a)(t).call(this,e))).animationFrame=null,n.state={value:0},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.animationFrame=requestAnimationFrame(function t(n){var a=Math.floor(n/250)%Math.ceil(e.props.length+1);e.state.value!==a&&e.setState({value:a}),e.animationFrame=requestAnimationFrame(t)})}},{key:"componentWillUnmount",value:function(){null!==this.animationFrame&&cancelAnimationFrame(this.animationFrame)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.length;t++)e.push(r.a.createElement("span",{style:{color:t<this.state.value?"white":"rgba(255, 255, 255, .5)"}},">"));return r.a.createElement("div",{style:{letterSpacing:"-.25em",userSelect:"none"}},e)}}]),t}(r.a.Component)),v=(n(20),function(e){return r.a.createElement("div",{className:"notice","data-type":e.notice.type},e.notice.message)}),f=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={currentRouteNumber:"",others:[],current:null,notices:[]},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"changeRouteTo",value:function(){var e=Object(i.a)(s.a.mark(function e(t){var n,a,r,o,l,c,i,d,h,m,b,p,g,v,f,E,w,y,j,S,x,O,k,R,F,L,N,z,A;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,a="http://www.ohsuga.is.uec.ac.jp/sparql",r="PREFIX dbr: <http://dbpedia.org/resource/>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX dbpedia-ja: <http://ja.dbpedia.org/resource/>\nPREFIX dbpedia-owl: <http://dbpedia.org/ontology/>\n\nselect distinct * where {\n  optional {\n    dbpedia-ja:\u56fd\u9053".concat(t,"\u53f7 dbpedia-owl:routeStart ?routeStart .\n    ?routeStart rdfs:label ?routeStartLabel.\n  }\n  optional {\n    dbpedia-ja:\u56fd\u9053").concat(t,"\u53f7 dbpedia-owl:routeEnd ?routeEnd .\n    ?routeEnd rdfs:label ?routeEndLabel .\n  }\n  optional {\n    dbpedia-ja:\u56fd\u9053").concat(t,"\u53f7 dbpedia-owl:length ?length .\n  }\n}\n"),this.setState({current:null,others:[],currentRouteNumber:t,notices:[].concat(Object(u.a)(n),[{message:"'\u56fd\u9053".concat(t,"\u53f7' \u3092\u554f\u3044\u5408\u308f\u305b\u4e2d..."),type:"info"}])}),e.next=7,fetch("".concat(a,"?query=").concat(encodeURIComponent(r)),{headers:{Accept:"application/sparql-results+json"}});case 7:return o=e.sent,e.next=10,o.text();case 10:for(l=e.sent,c=JSON.parse(l),i=new Set,d=new Set,h=new Set,m=new Set,b=null,p=!0,g=!1,v=void 0,e.prev=20,f=c.results.bindings[Symbol.iterator]();!(p=(E=f.next()).done);p=!0)void 0!==(w=E.value).routeStart&&i.add(w.routeStart.value),void 0!==w.routeEnd&&d.add(w.routeEnd.value),void 0!==w.routeStartLabel&&h.add(w.routeStartLabel.value),void 0!==w.routeEndLabel&&m.add(w.routeEndLabel.value),void 0!==w.length&&(b=+w.length.value);e.next=28;break;case 24:e.prev=24,e.t0=e.catch(20),g=!0,v=e.t0;case 28:e.prev=28,e.prev=29,p||null==f.return||f.return();case 31:if(e.prev=31,!g){e.next=34;break}throw v;case 34:return e.finish(31);case 35:return e.finish(28);case 36:if(!(h.size<1&&m.size<1&&null===b)){e.next=38;break}throw new Error("'\u56fd\u9053".concat(t,"\u53f7' \u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002"));case 38:if((h.size<1||m.size<1||null===b)&&(n=[].concat(Object(u.a)(n),[{message:"'\u56fd\u9053".concat(t,"\u53f7' \u306e").concat(h.size<1?m.size<1?"\u8d77\u7d42\u70b9":null===b?"\u8d77\u70b9\u3068\u9577\u3055":"\u8d77\u70b9":m.size<1?null===b?"\u7d42\u70b9\u3068\u9577\u3055":"\u7d42\u70b9":"\u9577\u3055","\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002"),type:"warn"}])),t===this.state.currentRouteNumber){e.next=41;break}return e.abrupt("return");case 41:return this.setState({current:{number:t,starts:h,ends:m,length:b},notices:[].concat(Object(u.a)(n),[{message:"'\u56fd\u9053".concat(t,"\u53f7' \u306b\u8d77\u7d42\u70b9\u304c\u4e00\u81f4\u3059\u308b\u56fd\u9053\u3092\u554f\u3044\u5408\u308f\u305b\u4e2d..."),type:"info"}])}),y="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX dbpedia-ja: <http://ja.dbpedia.org/resource/>\nPREFIX dbpedia-owl: <http://dbpedia.org/ontology/>\nPREFIX category-ja: <http://ja.dbpedia.org/resource/Category:>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#> \n\nselect distinct * where {\n  ?route dcterms:subject category-ja:\u4e00\u822c\u56fd\u9053 ;\n    rdfs:label ?routeLabel .\n  optional {\n    ?route dbpedia-owl:routeStart ?routeStart .\n  }\n  optional {\n    ?route dbpedia-owl:routeEnd ?routeEnd .\n  }\n  optional {\n    ?route dbpedia-owl:length ?length .\n  }\n  ".concat(Object(u.a)(new Set([].concat(Object(u.a)(i),Object(u.a)(d)))).map(function(e){return"{\n    ?route dbpedia-owl:routeStart <".concat(e,"> .\n  } union {\n    ?route dbpedia-owl:routeEnd <").concat(e,"> .\n  }")}).join(" union "),'\n  ?routeStart rdfs:label ?routeStartLabel .\n  ?routeEnd rdfs:label ?routeEndLabel .\n  filter(regex(?routeLabel, "^\u56fd\u9053[0-9]\u53f7$|^\u56fd\u9053[0-9][0-9]\u53f7$|^\u56fd\u9053[0-9][0-9][0-9]\u53f7$")) .\n  bind(xsd:integer(replace(replace(?routeLabel, "\u56fd\u9053", ""), "\u53f7", "")) as ?routeNumber) .\n} order by ?routeNumber'),e.next=45,fetch("".concat(a,"?query=").concat(encodeURIComponent(y)),{headers:{Accept:"application/sparql-results+json"}});case 45:return j=e.sent,e.next=48,j.text();case 48:S=e.sent,x=JSON.parse(S),O=new Map,k=!0,R=!1,F=void 0,e.prev=54,L=x.results.bindings[Symbol.iterator]();case 56:if(k=(N=L.next()).done){e.next=70;break}if(void 0!==(z=N.value).routeNumber){e.next=60;break}throw new Error;case 60:if(+z.routeNumber.value!==t){e.next=62;break}return e.abrupt("continue",67);case 62:A=O.get(+z.routeNumber.value)||{number:+z.routeNumber.value,starts:new Set,ends:new Set,length:null},O.set(+z.routeNumber.value,A),void 0!==z.routeStartLabel&&A.starts.add(z.routeStartLabel.value),void 0!==z.routeEndLabel&&A.ends.add(z.routeEndLabel.value),void 0!==z.length&&(A.length=+z.length.value);case 67:k=!0,e.next=56;break;case 70:e.next=76;break;case 72:e.prev=72,e.t1=e.catch(54),R=!0,F=e.t1;case 76:e.prev=76,e.prev=77,k||null==L.return||L.return();case 79:if(e.prev=79,!R){e.next=82;break}throw F;case 82:return e.finish(79);case 83:return e.finish(76);case 84:this.setState({others:Object(u.a)(O.values()),notices:n}),e.next=90;break;case 87:e.prev=87,e.t2=e.catch(1),t===this.state.currentRouteNumber&&this.setState({notices:[].concat(Object(u.a)(n),[{type:"error",message:e.t2.toString()}])});case 90:case"end":return e.stop()}},e,this,[[1,87],[20,24,28,36],[29,,31,35],[54,72,76,84],[77,,79,83]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{style:{margin:"64px 0",fontSize:"2em",fontWeight:"bold"}},"\u56fd\u9053",r.a.createElement("input",{type:"number",autoFocus:!0,min:1,max:999,value:this.state.currentRouteNumber,onChange:function(t){return e.changeRouteTo(+t.target.value)}}),"\u53f7"),r.a.createElement("ul",null,this.state.notices.map(function(e){return r.a.createElement("li",null,r.a.createElement(v,{notice:e}))})),null===this.state.current?"":r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"2em"}},r.a.createElement("div",{style:{textAlign:"right"}},this.state.current.starts.size<1?"?":r.a.createElement("ul",null,Object(u.a)(this.state.current.starts).map(function(e){return r.a.createElement("li",null,e)}))),r.a.createElement("div",{style:{margin:"0 1em"}},null===this.state.current.length?r.a.createElement("div",null,"->"):r.a.createElement("div",null,r.a.createElement("div",null,this.state.current.length<1e3?"".concat(this.state.current.length,"m"):"".concat(this.state.current.length/1e3,"km")),r.a.createElement("div",null,r.a.createElement(g,{length:this.state.current.length/2e4})))),r.a.createElement("div",{style:{textAlign:"left"}},this.state.current.ends.size<1?"?":r.a.createElement("ul",null,Object(u.a)(this.state.current.ends).map(function(e){return r.a.createElement("li",null,e)})))),null===this.state.others||this.state.others.length<1?"":r.a.createElement("table",{style:{margin:"64px auto"}},r.a.createElement("caption",{style:{fontWeight:"bold"}},"\u8d77\u7d42\u70b9\u304c\u4e00\u81f4\u3059\u308b\u56fd\u9053"),r.a.createElement("tbody",null,this.state.others.map(function(t){return r.a.createElement("tr",{onClick:function(){return e.changeRouteTo(t.number)},style:{color:Object(u.a)(t.starts).some(function(t){return null!==e.state.current&&e.state.current.starts.has(t)})&&Object(u.a)(t.ends).some(function(t){return null!==e.state.current&&e.state.current.ends.has(t)})||Object(u.a)(t.starts).some(function(t){return null!==e.state.current&&e.state.current.ends.has(t)})&&Object(u.a)(t.ends).some(function(t){return null!==e.state.current&&e.state.current.starts.has(t)})?"lightgreen":"inherit"}},r.a.createElement("td",{style:{textAlign:"left",fontWeight:"bold"}},"\u56fd\u9053",t.number,"\u53f7"),r.a.createElement("td",{style:{textAlign:"right"}},t.starts.size<1?"?":r.a.createElement("ul",null,Object(u.a)(t.starts).map(function(t){return r.a.createElement("li",{style:{textDecoration:null!==e.state.current&&(e.state.current.starts.has(t)||e.state.current.ends.has(t))?"underline":"none"}},t)}))),r.a.createElement("td",{style:{color:"rgba(255, 255, 255, .5)"}},"->"),r.a.createElement("td",{style:{textAlign:"left"}},t.ends.size<1?"?":r.a.createElement("ul",null,Object(u.a)(t.ends).map(function(t){return r.a.createElement("li",{style:{textDecoration:null!==e.state.current&&(e.state.current.starts.has(t)||e.state.current.ends.has(t))?"underline":"none"}},t)}))),r.a.createElement("td",{style:{textAlign:"right"}},null===t.length?"-":t.length<1e3?"".concat(t.length,"m"):"".concat(t.length/1e3,"km")))}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.cb92e114.chunk.js.map